{"version":3,"sources":["polyfills.js","utils.js","components/LocationInput/index.js","hooks/usePrevious.js","components/ContainerCoords/index.js","components/Modal/index.js","components/MarcadorEdit/index.js","constants.js","App.js","index.js"],"names":["Array","prototype","find","Object","defineProperty","value","predicate","this","TypeError","o","len","length","thisArg","arguments","k","kValue","call","configurable","writable","from","toStr","toString","isCallable","fn","maxSafeInteger","Math","pow","toLength","number","Number","isNaN","isFinite","floor","abs","toInteger","min","max","arrayLike","C","items","T","mapFn","A","getLetra","split","getCidNomeByAddress","results","cidNome","forEach","result","address_components","component","types","type","long_name","getPostalCodeByAddress","postalCode","getIBGECodeByCEP","cep","a","URL","replace","fetch","response","text","jsonText","json","JSON","parse","ibge","Input","styled","input","props","ContainerSuggestions","div","ItemSuggestion","active","LocationSearchInput","handleChange","address","setState","handleSelect","geocodeByAddress","then","Utils","getLatLng","latLng","onPlaceSelected","catch","error","console","state","highlightFirstSuggestion","onChange","onSelect","getInputProps","suggestions","getSuggestionItemProps","loading","placeholder","map","suggestion","description","React","Component","usePrevious","ref","useRef","useEffect","current","Container","StyledContainer","List","ol","StyledItemCoord","li","created","ContainerAcoes","IconButton","button","ContainerDescricao","SortableItem","SortableElement","useState","setCreated","setTimeout","style","cursor","id","onClick","coord","index","onEdit","onDelete","SortableList","SortableContainer","itemsEnd","onItemClick","prevItems","scrollIntoView","behavior","key","float","clear","el","ContainerCoords","coords","onReorder","children","distance","onSortEnd","oldIndex","newIndex","arrayMove","ContainerModal","open","Modal","onClose","closeOnOverlayClick","Button","Body","Header","Bottom","MarcadorEdit","descricaoInput","item","onCancel","onConfirm","descricao","setDescricao","focus","setSelectionRange","defaultValue","event","target","API_KEY","FullMap","Map","ContainerLocationInput","GoogleApiWrapper","apiKey","CONST","language","editMarcador","setEditMarcador","window","globalDelphiEditMarkers","markers","setMarkers","points","centralizar","centralizarMapa","setCentralizarMapa","center","lat","lng","zoom","bounds","undefined","mapCenter","setMapCenter","markersProcessados","setMarkersProcessados","globalDelphiSetMarkers","globalDelphiProcessarMarkers","promises","mark","marker","IBGECode","ok","status","alert","Promise","all","finalMarkers","google","maps","LatLngBounds","i","extend","getCenter","stringify","minZoom","maxZoom","b","c","obj","cord","prevState","initialCenter","location","label","fontFamily","fontSize","color","fontWeight","position","LocationInput","newMarkers","filter","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3f4a530f.chunk.js","sourcesContent":["/* eslint-disable no-extend-native */\r\n// https://tc39.github.io/ecma262/#sec-array.prototype.find\r\nif (!Array.prototype.find) {\r\n  Object.defineProperty(Array.prototype, 'find', {\r\n    value: function(predicate) {\r\n      // 1. Let O be ? ToObject(this value).\r\n      if (this == null) {\r\n        throw TypeError('\"this\" is null or not defined');\r\n      }\r\n\r\n      var o = Object(this);\r\n\r\n      // 2. Let len be ? ToLength(? Get(O, \"length\")).\r\n      var len = o.length >>> 0;\r\n\r\n      // 3. If IsCallable(predicate) is false, throw a TypeError exception.\r\n      if (typeof predicate !== 'function') {\r\n        throw TypeError('predicate must be a function');\r\n      }\r\n\r\n      // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\r\n      var thisArg = arguments[1];\r\n\r\n      // 5. Let k be 0.\r\n      var k = 0;\r\n\r\n      // 6. Repeat, while k < len\r\n      while (k < len) {\r\n        // a. Let Pk be ! ToString(k).\r\n        // b. Let kValue be ? Get(O, Pk).\r\n        // c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\r\n        // d. If testResult is true, return kValue.\r\n        var kValue = o[k];\r\n        if (predicate.call(thisArg, kValue, k, o)) {\r\n          return kValue;\r\n        }\r\n        // e. Increase k by 1.\r\n        k++;\r\n      }\r\n\r\n      // 7. Return undefined.\r\n      return undefined;\r\n    },\r\n    configurable: true,\r\n    writable: true\r\n  });\r\n}\r\n\r\n// Production steps of ECMA-262, Edition 6, 22.1.2.1\r\nif (!Array.from) {\r\n  Array.from = (function () {\r\n    var toStr = Object.prototype.toString;\r\n    var isCallable = function (fn) {\r\n      return typeof fn === 'function' || toStr.call(fn) === '[object Function]';\r\n    };\r\n    var toInteger = function (value) {\r\n      var number = Number(value);\r\n      if (isNaN(number)) { return 0; }\r\n      if (number === 0 || !isFinite(number)) { return number; }\r\n      return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));\r\n    };\r\n    var maxSafeInteger = Math.pow(2, 53) - 1;\r\n    var toLength = function (value) {\r\n      var len = toInteger(value);\r\n      return Math.min(Math.max(len, 0), maxSafeInteger);\r\n    };\r\n\r\n    // The length property of the from method is 1.\r\n    return function from(arrayLike/*, mapFn, thisArg */) {\r\n      // 1. Let C be the this value.\r\n      var C = this;\r\n\r\n      // 2. Let items be ToObject(arrayLike).\r\n      var items = Object(arrayLike);\r\n\r\n      // 3. ReturnIfAbrupt(items).\r\n      if (arrayLike == null) {\r\n        throw new TypeError('Array.from requires an array-like object - not null or undefined');\r\n      }\r\n\r\n      // 4. If mapfn is undefined, then let mapping be false.\r\n      var mapFn = arguments.length > 1 ? arguments[1] : void undefined;\r\n      var T;\r\n      if (typeof mapFn !== 'undefined') {\r\n        // 5. else\r\n        // 5. a If IsCallable(mapfn) is false, throw a TypeError exception.\r\n        if (!isCallable(mapFn)) {\r\n          throw new TypeError('Array.from: when provided, the second argument must be a function');\r\n        }\r\n\r\n        // 5. b. If thisArg was supplied, let T be thisArg; else let T be undefined.\r\n        if (arguments.length > 2) {\r\n          T = arguments[2];\r\n        }\r\n      }\r\n\r\n      // 10. Let lenValue be Get(items, \"length\").\r\n      // 11. Let len be ToLength(lenValue).\r\n      var len = toLength(items.length);\r\n\r\n      // 13. If IsConstructor(C) is true, then\r\n      // 13. a. Let A be the result of calling the [[Construct]] internal method \r\n      // of C with an argument list containing the single item len.\r\n      // 14. a. Else, Let A be ArrayCreate(len).\r\n      var A = isCallable(C) ? Object(new C(len)) : new Array(len);\r\n\r\n      // 16. Let k be 0.\r\n      var k = 0;\r\n      // 17. Repeat, while k < len… (also steps a - h)\r\n      var kValue;\r\n      while (k < len) {\r\n        kValue = items[k];\r\n        if (mapFn) {\r\n          A[k] = typeof T === 'undefined' ? mapFn(kValue, k) : mapFn.call(T, kValue, k);\r\n        } else {\r\n          A[k] = kValue;\r\n        }\r\n        k += 1;\r\n      }\r\n      // 18. Let putStatus be Put(A, \"length\", len, true).\r\n      A.length = len;\r\n      // 20. Return A.\r\n      return A;\r\n    };\r\n  }());\r\n}","function distance(position1, position2) {\r\n\tvar deg2rad = function(deg) {\r\n\t\t\treturn deg * (Math.PI / 180);\r\n\t\t},\r\n\t\tR = 6371,\r\n\t\tdLat = deg2rad(position2.lat - position1.lat),\r\n\t\tdLng = deg2rad(position2.lng - position1.lng),\r\n\t\ta =\r\n\t\t\tMath.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n\t\t\tMath.cos(deg2rad(position1.lat)) *\r\n\t\t\t\tMath.cos(deg2rad(position1.lat)) *\r\n\t\t\t\tMath.sin(dLng / 2) *\r\n\t\t\t\tMath.sin(dLng / 2),\r\n\t\tc = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n\treturn (R * c * 1000).toFixed();\r\n}\r\n\r\n//-- Define radius function\r\nconst toRad = function(value) {\r\n\treturn (value * Math.PI) / 180;\r\n};\r\n\r\n//-- Define degrees function\r\nconst toDeg = function(value) {\r\n\treturn value * (180 / Math.PI);\r\n};\r\n\r\n//-- Define middle point function\r\nfunction midPoint(position1, position2) {\r\n\tlet lat1 = position1.lat;\r\n\tlet lng1 = position1.lng;\r\n\tlet lat2 = position2.lat;\r\n\tlet lng2 = position2.lng;\r\n\r\n\t//-- Longitude difference\r\n\tvar dLng = toRad(lng2 - lng1);\r\n\r\n\t//-- Convert to radians\r\n\tlat1 = toRad(lat1);\r\n\tlat2 = toRad(lat2);\r\n\tlng1 = toRad(lng1);\r\n\r\n\tvar bX = Math.cos(lat2) * Math.cos(dLng);\r\n\tvar bY = Math.cos(lat2) * Math.sin(dLng);\r\n\tvar lat3 = Math.atan2(\r\n\t\tMath.sin(lat1) + Math.sin(lat2),\r\n\t\tMath.sqrt((Math.cos(lat1) + bX) * (Math.cos(lat1) + bX) + bY * bY),\r\n\t);\r\n\tvar lng3 = lng1 + Math.atan2(bY, Math.cos(lat1) + bX);\r\n\r\n\t//-- Return result\r\n\treturn { lat: toDeg(lat3), lng: toDeg(lng3) };\r\n}\r\n\r\nconst dividirEmDistanciasMenores = (elements, maxDistance) => {\r\n\tlet newElements = [...elements];\r\n\tfor (let i = 0; i < elements.length; i++) {\r\n\t\tif (elements[i + 1]) {\r\n\t\t\tconst coord = elements[i];\r\n\t\t\tconst distancia = distance(coord, elements[i + 1]);\r\n\t\t\tif (distancia > maxDistance) {\r\n\t\t\t\tconst middlePoint = midPoint(coord, elements[i + 1]);\r\n\t\t\t\tnewElements.splice(i + 1, 0, middlePoint);\r\n\t\t\t\treturn dividirEmDistanciasMenores(newElements, maxDistance);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn newElements;\r\n};\r\n\r\nconst getLetra = number => {\r\n\tconst letras = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n\treturn letras.split('')[number - 1];\r\n};\r\n\r\nconst getCidNomeByAddress = results => {\r\n\tlet cidNome = '';\r\n\tresults.forEach(result => {\r\n\t\tresult.address_components.forEach(component => {\r\n\t\t\tcomponent.types.forEach(type => {\r\n\t\t\t\tif (type === 'administrative_area_level_2' && cidNome === '') cidNome = component.long_name;\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n\treturn cidNome;\r\n};\r\n\r\nconst getPostalCodeByAddress = results => {\r\n\tlet postalCode = '';\r\n\tresults.forEach(result => {\r\n\t\tresult.address_components.forEach(component => {\r\n\t\t\tcomponent.types.forEach(type => {\r\n\t\t\t\tif (type === 'postal_code' && postalCode === '') postalCode = component.long_name;\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n\treturn postalCode;\r\n};\r\n\r\nconst getIBGECodeByCEP = async cep => {\r\n\tconst URL = `https://ws.hubdodesenvolvedor.com.br/v2/cep/?cep=${cep.replace(\r\n\t\t'-',\r\n\t\t'',\r\n\t)}&token=1852063656958911ABV13523499907.5`;\r\n\tconst response = await fetch(URL);\r\n\tconst jsonText = await response.text();\r\n\tconst json = JSON.parse(jsonText);\r\n\treturn json.result.ibge;\r\n};\r\n\r\nexport {\r\n\tdistance,\r\n\tmidPoint,\r\n\tdividirEmDistanciasMenores,\r\n\tgetLetra,\r\n\tgetCidNomeByAddress,\r\n\tgetPostalCodeByAddress,\r\n\tgetIBGECodeByCEP,\r\n};\r\n","import React from 'react';\r\nimport PlacesAutocomplete, { geocodeByAddress, getLatLng } from 'react-places-autocomplete';\r\nimport styled from 'styled-components';\r\n\r\nimport * as Utils from '../../utils';\r\n\r\nconst Input = styled.input`\r\n\twidth: 100%;\r\n\tpadding: 12px 20px;\r\n\tfont-family: 'Roboto';\r\n\tborder-radius: 2px;\r\n\tbox-shadow: 3px ${props => (props.items ? '0' : '4px')} 8px 0 rgb(0, 0, 0, 0.2);\r\n\tborder: 1px solid #ccc;\r\n`;\r\n\r\nconst ContainerSuggestions = styled.div`\r\n\twidth: 100%;\r\n\tbackground-color: #fff;\r\n\tbox-shadow: 3px ${props => (props.items ? '4px' : '0')} 8px 0 rgb(0, 0, 0, 0.2);\r\n`;\r\n\r\nconst ItemSuggestion = styled.div`\r\n\tpadding: 15px 20px;\r\n\tfont-size: 0.8em;\r\n\tfont-family: 'Roboto';\r\n\tcursor: pointer;\r\n\tbackground-color: ${props => (props.active ? '#f0f0f0' : '#fff')};\r\n\ttransition: all 0.1s;\r\n`;\r\n\r\nclass LocationSearchInput extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.onPlaceSelected = props.onPlaceSelected ? props.onPlaceSelected : () => {};\r\n\t\tthis.state = { address: '' };\r\n\t}\r\n\r\n\thandleChange = address => {\r\n\t\tthis.setState({ address });\r\n\t};\r\n\r\n\thandleSelect = address => {\r\n\t\tgeocodeByAddress(address)\r\n\t\t\t.then(async results => {\r\n\t\t\t\tlet postalCode = Utils.getPostalCodeByAddress(results);\r\n\t\t\t\tlet cidNome = Utils.getCidNomeByAddress(results);\r\n\t\t\t\tconst latLng = await getLatLng(results[0]);\r\n\t\t\t\tthis.onPlaceSelected({ ...latLng, address, postalCode, cidNome });\r\n\t\t\t\tthis.setState({ address: '' });\r\n\t\t\t})\r\n\t\t\t.catch(error => console.error(error));\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<PlacesAutocomplete\r\n\t\t\t\thighlightFirstSuggestion\r\n\t\t\t\tvalue={this.state.address}\r\n\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\tonSelect={this.handleSelect}\r\n\t\t\t>\r\n\t\t\t\t{({ getInputProps, suggestions, getSuggestionItemProps, loading }) => (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\titems={suggestions.length > 0}\r\n\t\t\t\t\t\t\t{...getInputProps({ placeholder: 'Procurar endereços, cidades, estados, locais...' })}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<ContainerSuggestions items={suggestions.length > 0}>\r\n\t\t\t\t\t\t\t{suggestions.map(suggestion => (\r\n\t\t\t\t\t\t\t\t<ItemSuggestion active={suggestion.active} {...getSuggestionItemProps(suggestion)}>\r\n\t\t\t\t\t\t\t\t\t{suggestion.description}\r\n\t\t\t\t\t\t\t\t</ItemSuggestion>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</ContainerSuggestions>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</PlacesAutocomplete>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default LocationSearchInput;\r\n","import { useEffect, useRef } from 'react';\r\n\r\nconst usePrevious = value => {\r\n\tconst ref = useRef();\r\n\tuseEffect(() => {\r\n\t\tref.current = value;\r\n\t});\r\n\treturn ref.current;\r\n};\r\n\r\nexport default usePrevious;","import React, { useState, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\r\nimport arrayMove from 'array-move';\r\n\r\nimport { MdDeleteForever, MdReorder, MdEdit } from 'react-icons/md';\r\n\r\nimport usePrevious from '../../hooks/usePrevious';\r\n\r\nimport * as Utils from '../../utils';\r\n\r\nconst Container = styled.div`\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: space-around;\r\n\tposition: absolute;\r\n\twidth: 400px;\r\n\theight: 200px;\r\n\tleft: 30px;\r\n\tbottom: 55px;\r\n\tbox-shadow: 4px 4px 8px 0 rgba(0, 0, 0, 0.2);\r\n`;\r\n\r\nconst StyledContainer = styled.div`\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tbackground-color: #fff;\r\n\toverflow-y: scroll;\r\n\tborder-top-left-radius: 2px;\r\n\tborder-top-right-radius: 2px;\r\n`;\r\n\r\nconst List = styled.ol`\r\n\tlist-style-type: none;\r\n\tmargin: 10px 0 0 0;\r\n\tpadding: 0;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n`;\r\n\r\nconst StyledItemCoord = styled.li`\r\n\twidth: 338px;\r\n\tmargin-bottom: 5px;\r\n\tpadding: 5px 10px;\r\n\tborder: 1px solid #bbb;\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tbackground-color: ${props => (props.created ? '#26A598' : '#fff')};\r\n\tcolor: ${props => (props.created ? '#fff' : '#222')};\r\n\ttransition: background-color 0.5s;\r\n\tfont-weight: 600;\r\n\tfont-size: 0.8em;\r\n\tfont-family: 'Roboto';\r\n\tuser-select: none;\r\n\tcursor: pointer;\r\n`;\r\n\r\nconst ContainerAcoes = styled.div`\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n`;\r\n\r\nconst IconButton = styled.button`\r\n\ttext-align: center;\r\n\theight: 100%;\r\n\tpadding: 0 2px;\r\n\tborder: none;\r\n\tbackground: none;\r\n\tfont-size: 1.3em;\r\n\tcolor: inherit;\r\n\tdisplay: inline-flex;\r\n\tflex-direction: column;\r\n\tjustify-content: center;\r\n\tcursor: pointer;\r\n\t&:focus {\r\n\t\toutline: 0;\r\n\t}\r\n`;\r\n\r\nconst ContainerDescricao = styled.div`\r\n\tpadding: 0 10px;\r\n\ttext-align: center;\r\n\tmax-width: 250px;\r\n`;\r\n\r\nconst ItemCoord = props => {\r\n\tconst [created, setCreated] = useState(true);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetTimeout(() => {\r\n\t\t\tif (created) setCreated(false);\r\n\t\t}, 200);\r\n\t}, [created]);\r\n\r\n\treturn (\r\n\t\t<StyledItemCoord created={created}>\r\n\t\t\t<IconButton style={{ cursor: 'move' }} id=\"btn-reorder\">\r\n\t\t\t\t<MdReorder />\r\n\t\t\t</IconButton>\r\n\t\t\t<ContainerDescricao onClick={props.onClick}>\r\n\t\t\t\t{Utils.getLetra(props.coord.index + 1)} - {props.coord.address}\r\n\t\t\t</ContainerDescricao>\r\n\t\t\t<ContainerAcoes>\r\n\t\t\t\t<IconButton onClick={() => props.onEdit()}>\r\n\t\t\t\t\t<MdEdit />\r\n\t\t\t\t</IconButton>\r\n\t\t\t\t<IconButton onClick={() => props.onDelete()}>\r\n\t\t\t\t\t<MdDeleteForever />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</ContainerAcoes>\r\n\t\t</StyledItemCoord>\r\n\t);\r\n};\r\n\r\nconst SortableItem = SortableElement(ItemCoord);\r\n\r\nconst SortableList = SortableContainer(({ items, onItemClick, onEdit, onDelete }) => {\r\n\tvar itemsEnd;\r\n\r\n\tconst prevItems = usePrevious(items);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (prevItems && items && items.length > prevItems.length) {\r\n\t\t\titemsEnd.scrollIntoView({ behavior: 'smooth' });\r\n\t\t}\r\n\t}, [items, prevItems, itemsEnd]);\r\n\r\n\treturn (\r\n\t\t<List>\r\n\t\t\t{items.map((coord, index) => (\r\n\t\t\t\t<SortableItem\r\n\t\t\t\t\tonClick={() => onItemClick(index)}\r\n\t\t\t\t\tkey={index}\r\n\t\t\t\t\tindex={index}\r\n\t\t\t\t\tcoord={{ ...coord, index: index }}\r\n\t\t\t\t\tonEdit={() => onEdit(index)}\r\n\t\t\t\t\tonDelete={() => onDelete(index)}\r\n\t\t\t\t/>\r\n\t\t\t))}\r\n\t\t\t<div style={{ float: 'left', clear: 'both' }} ref={el => (itemsEnd = el)}></div>\r\n\t\t</List>\r\n\t);\r\n});\r\n\r\nconst ContainerCoords = ({ coords, onDelete, onEdit, onReorder, onItemClick, children }) => {\r\n\tconst handleSortEnd = ({ oldIndex, newIndex }) => onReorder(arrayMove(coords, oldIndex, newIndex));\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<StyledContainer>\r\n\t\t\t\t<SortableList\r\n\t\t\t\t\tdistance={1}\r\n\t\t\t\t\tonSortEnd={handleSortEnd}\r\n\t\t\t\t\titems={coords}\r\n\t\t\t\t\tonItemClick={onItemClick}\r\n\t\t\t\t\tonEdit={onEdit}\r\n\t\t\t\t\tonDelete={onDelete}\r\n\t\t\t\t/>\r\n\t\t\t</StyledContainer>\r\n\t\t\t{children}\r\n\t\t</Container>\r\n\t);\r\n};\r\n\r\nexport default ContainerCoords;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst ContainerModal = styled.div`\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\twidth: 100vw;\r\n\theight: 100vh;\r\n\tdisplay: ${({ open }) => open ? 'flex' : 'none' };\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tbackground-color: #0005;\r\n`;\r\n\r\nconst Modal = ({ children, open, onClose, closeOnOverlayClick }) => (\r\n\t<ContainerModal onClick={() => {\r\n\t\t// if (closeOnOverlayClick) onClose();\r\n\t}} open={open}>\r\n\t\t{ children }\r\n\t</ContainerModal>\t\r\n);\r\n\r\nexport default Modal;","import React, { useState, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst Button = styled.button`\r\n\tbackground-color: #fff;\r\n\tborder: 1px solid #222;\r\n\tborder-radius: 1px;\r\n\tpadding: 7px 15px;\r\n\tmargin-right: 15px;\r\n\tfont-weight: 900;\r\n\tfont-family: 'Roboto';\r\n\ttransition: all 0.1s;\r\n\r\n\t&:hover {\r\n\t\tbackground-color: #222;\r\n\t\tcolor: #fff;\r\n\t}\r\n`;\r\n\r\nconst Body = styled.div`\r\n\tflex-grow: 2;\r\n\twidth: 100%;\r\n\tpadding: 30px 0;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n`;\r\n\r\nconst Container = styled.div`\r\n\twidth: 500px;\r\n\tbackground-color: #fff;\r\n\tborder-radius: 2px;\r\n\tbox-shadow: 4px 4px 8px 0 rgba(0, 0, 0, 0.2);\r\n\tfont-family: 'Roboto';\r\n`;\r\n\r\nconst Header = styled.div`\r\n\tborder-bottom: 1px solid #aaa;\r\n\tline-height: 60px;\r\n\ttext-align: center;\r\n\tfont-size: 1.4em;\r\n`;\r\n\r\nconst Bottom = styled.div`\r\n\tborder-bottom: none;\r\n\tborder-top: 1px solid #aaa;\r\n\tfont-size: 1em;\r\n\tdisplay: flex;\r\n\tpadding: 10px 0;\r\n\tflex-direction: row;\r\n\tjustify-content: flex-end;\r\n\talign-items: center;\r\n`;\r\n\r\nconst Input = styled.input`\r\n\twidth: 80%;\r\n\tpadding: 12px 20px;\r\n\tfont-family: 'Roboto';\r\n\tborder-radius: 2px;\r\n\tborder: 1px solid #ccc;\r\n`;\r\n\r\nconst MarcadorEdit = ({ item, onCancel, onConfirm }) => {\r\n\tvar descricaoInput;\r\n\tconst [descricao, setDescricao] = useState('');\r\n\tconst handleConfirmar = () => onConfirm({ ...item, address: descricao });\r\n\tuseEffect(() => setDescricao(item.address), [item]);\r\n\tuseEffect(() => {\r\n\t\tdescricaoInput.focus();\r\n\t\tdescricaoInput.setSelectionRange(0, descricaoInput.value.length);\r\n\t}, [descricaoInput]);\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Header>Alterar Marcador</Header>\r\n\t\t\t<Body>\r\n\t\t\t\t<Input\r\n\t\t\t\t\tref={(input) => { descricaoInput = input; }}\r\n\t\t\t\t\tdefaultValue={descricao}\r\n\t\t\t\t\tonChange={event => setDescricao(event.target.value)}\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tplaceholder=\"Descrição\"\r\n\t\t\t\t></Input>\r\n\t\t\t</Body>\r\n\t\t\t<Bottom>\r\n\t\t\t\t<Button onClick={onCancel}>CANCELAR</Button>\r\n\t\t\t\t<Button onClick={handleConfirmar}>CONFIRMAR</Button>\r\n\t\t\t</Bottom>\r\n\t\t</Container>\r\n\t);\r\n};\r\n\r\nexport default MarcadorEdit;\r\n","const API_KEY='AIzaSyA3UW4OsghW42-ObMDSMd9EShKCmk8hleE';\r\n\r\nexport { API_KEY };","import React, { useState, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport { Map, GoogleApiWrapper, Marker } from 'google-maps-react';\r\n\r\nimport LocationInput from './components/LocationInput';\r\nimport ContainerCoords from './components/ContainerCoords';\r\nimport Modal from './components/Modal';\r\nimport MarcadorEdit from './components/MarcadorEdit';\r\n\r\nimport * as CONST from './constants';\r\nimport * as Utils from './utils';\r\n\r\nconst FullMap = styled(Map)`\r\n\twidth: 100vw;\r\n\theight: 100vh;\r\n`;\r\n\r\n// const ContainerButtons = styled.div`\r\n// \tdisplay: grid;\r\n// \tgrid-template-columns: 1fr 1fr;\r\n// `;\r\n\r\nconst ContainerLocationInput = styled.div`\r\n\tposition: absolute;\r\n\tleft: 50%;\r\n\twidth: 600px;\r\n\tmargin-left: -300px;\r\n\ttop: 20px;\r\n`;\r\n\r\n// const Button = styled.button`\r\n// \twidth: 100%;\r\n// \tborder-bottom-left-radius: 2px;\r\n// \tborder-bottom-right-radius: 2px;\r\n// \tpadding: 10px 0;\r\n// \tbottom: 10px;\r\n// \tbackground-color: #fff;\r\n// \tborder: 1px;\r\n// \tborder: 1px solid #888;\r\n// \ttransition: all 0.5s;\r\n// \tfont-family: 'Roboto';\r\n// \tfont-weight: 900;\r\n\r\n// \t&:hover {\r\n// \t\tbackground-color: #f2f2f2;\r\n// \t}\r\n// `;\r\n\r\nfunction App(props) {\r\n\tconst [editMarcador, setEditMarcador] = useState({ open: false, item: {} });\r\n\tconst [markers, setMarkers] = useState(window.globalDelphiEditMarkers ? window.globalDelphiEditMarkers : []);\r\n\t// const [route, setRoute] = useState([]);\r\n\tconst [centralizarMapa, setCentralizarMapa] = useState({ points: [], centralizar: false });\r\n\tconst [mapCenter, setMapCenter] = useState({\r\n\t\tcenter: { lat: -12.579738, lng: -41.70072720000002 },\r\n\t\tzoom: 7,\r\n\t\tbounds: undefined,\r\n\t});\r\n\tconst [markersProcessados, setMarkersProcessados] = useState(true);\r\n\r\n\t//Set markers para edição\r\n\twindow.globalDelphiSetMarkers = setMarkers;\r\n\t//Processar antes de usar o get, para preencher a cidade e código postal dos markers colocados manualmente\r\n\twindow.globalDelphiProcessarMarkers = async () => {\r\n\t\tsetMarkersProcessados(false);\r\n\t\tconst promises = markers.map(async marker => {\r\n\t\t\tif (!marker.IBGECode) {\r\n\t\t\t\tif (!marker.postalCode || !marker.cidNome) {\r\n\t\t\t\t\tconst latLng = `${marker.lat},${marker.lng}`;\r\n\t\t\t\t\tconst URL = `https://maps.googleapis.com/maps/api/geocode/json?latlng=${latLng}&key=${CONST.API_KEY}`;\r\n\t\t\t\t\tconst response = await fetch(URL);\r\n\t\t\t\t\tif (response.ok) {\r\n\t\t\t\t\t\tconst json = JSON.parse(await response.text());\r\n\t\t\t\t\t\tif (json.status === 'OK') {\r\n\t\t\t\t\t\t\tconst postalCode = Utils.getPostalCodeByAddress(json.results);\r\n\t\t\t\t\t\t\tconst cidNome = Utils.getCidNomeByAddress(json.results);\r\n\t\t\t\t\t\t\tconst IBGECode = await Utils.getIBGECodeByCEP(postalCode);\r\n\t\t\t\t\t\t\treturn { ...marker, cidNome, postalCode, IBGECode };\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\talert(\r\n\t\t\t\t\t\t\t\t`Erro ao buscar cidade e código postal do marcador [${marker.address}], verifique o console para mais detalhes`,\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tconsole.error(json);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\talert(\r\n\t\t\t\t\t\t\t`Erro ao buscar cidade e código postal do marcador [${marker.address}], verifique o console para mais detalhes`,\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tconsole.error(response);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconst IBGECode = await Utils.getIBGECodeByCEP(marker.postalCode);\r\n\t\t\t\treturn { ...marker, IBGECode };\r\n\t\t\t}\r\n\t\t\treturn marker;\r\n\t\t});\r\n\t\tconst finalMarkers = await Promise.all(promises);\r\n\t\tsetMarkers(finalMarkers);\r\n\t\tsetMarkersProcessados(true);\r\n\t};\r\n\r\n\tconst handleMapClick = (a, b, c) => {\r\n\t\tconst obj = { ...c };\r\n\t\tconst cord = { ...obj.latLng };\r\n\t\tsetMarkers(prevState => [\r\n\t\t\t...prevState,\r\n\t\t\t{ lat: cord.lat(), lng: cord.lng(), address: `Marcador ${prevState.length + 1}` },\r\n\t\t]);\r\n\t};\r\n\tconst handlePlaceSelected = location => {\r\n\t\tsetMarkers(markers => {\r\n\t\t\tconst newMarkers = [...markers, location];\r\n\t\t\tsetCentralizarMapa({ points: newMarkers, centralizar: true });\r\n\t\t\treturn newMarkers;\r\n\t\t});\r\n\t};\r\n\tconst handleItemClick = index => setCentralizarMapa({ points: [markers[index]], centralizar: true });\r\n\tconst handleDelete = index => setMarkers(markers => markers.filter((value, i) => i !== index));\r\n\tconst handleReorder = coords => setMarkers(coords);\r\n\t// const handleSalvar = () => {\r\n\t// \tvar a = document.createElement('a');\r\n\t// \tvar file = new Blob([JSON.stringify(markers)], { type: 'application/json' });\r\n\t// \ta.href = URL.createObjectURL(file);\r\n\t// \ta.download = 'coordenadas';\r\n\t// \ta.click();\r\n\t// };\r\n\t// const handleProcessar = () => {\r\n\t// \tif (markers.length < 2 || markers.length > 25) {\r\n\t// \t\talert(`Número de pontos inválido. (Máximo = 25)`);\r\n\t// \t\treturn;\r\n\t// \t}\r\n\r\n\t// \tconst waypoints = markers\r\n\t// \t\t.filter((coord, index) => index !== 0 && index !== markers.length - 1)\r\n\t// \t\t.map(coord => ({ location: `${coord.lat},${coord.lng}`, stopover: true }));\r\n\r\n\t// \tconst params = {\r\n\t// \t\torigin: `${markers[0].lat},${markers[0].lng}`,\r\n\t// \t\tdestination: `${markers[markers.length - 1].lat},${markers[markers.length - 1].lng}`,\r\n\t// \t\ttravelMode: 'DRIVING',\r\n\t// \t\twaypoints: waypoints,\r\n\t// \t};\r\n\r\n\t// \tvar directionsService = new props.google.maps.DirectionsService();\r\n\t// \tdirectionsService.route(params, (response, status) => {\r\n\t// \t\tif (status === 'OK') {\r\n\t// \t\t\tconst path = props.google.maps.geometry.encoding.decodePath(response.routes[0].overview_polyline);\r\n\t// \t\t\tsetRoute(path);\r\n\t// \t\t} else {\r\n\t// \t\t\twindow.alert('Falha ao traçar rota: ' + status);\r\n\t// \t\t}\r\n\t// \t});\r\n\t// };\r\n\tconst handleConfirmEditMarcador = item => {\r\n\t\tsetMarkers(markers.map((value, index) => (index === item.index ? item : value)));\r\n\t\tsetEditMarcador({ open: false, item: {} });\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tconst { points, centralizar } = centralizarMapa;\r\n\t\tif (points.length > 0 && centralizar) {\r\n\t\t\tvar bounds = new props.google.maps.LatLngBounds();\r\n\t\t\tfor (var i = 0; i < points.length; i++) {\r\n\t\t\t\tbounds.extend(points[i]);\r\n\t\t\t}\r\n\t\t\tsetMapCenter({ center: bounds.getCenter(), bounds: bounds });\r\n\t\t}\r\n\t}, [props, centralizarMapa]);\r\n\r\n\t// useEffect(() => {\r\n\t// \tlet processado = true;\r\n\t// \tmarkers.forEach(marker => {\r\n\t// \t\tif (!marker.IBGECode) processado = false;\r\n\t// \t});\r\n\t// \tsetMarkersProcessados(processado);\r\n\t// }, [markers]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<input type=\"hidden\" id=\"globalDelphiMarkers\" value={JSON.stringify(markers)} />\r\n\t\t\t<input type=\"hidden\" id=\"globalDelphiMarkersProcessados\" value={markersProcessados} />\r\n\t\t\t<FullMap\r\n\t\t\t\tminZoom={3}\r\n\t\t\t\tmaxZoom={18}\r\n\t\t\t\tonClick={handleMapClick}\r\n\t\t\t\tbounds={mapCenter.bounds}\r\n\t\t\t\tgoogle={props.google}\r\n\t\t\t\tinitialCenter={mapCenter.center}\r\n\t\t\t\tcenter={mapCenter.center}\r\n\t\t\t\tzoom={mapCenter.zoom}\r\n\t\t\t>\r\n\t\t\t\t{/* route.length > 0 && (\r\n\t\t\t\t\t<Polyline path={route} strokeColor=\"#3680ff\" strokeOpacity={0.6} strokeWeight={4} />\r\n\t\t\t\t)*/}\r\n\r\n\t\t\t\t{markers.map((location, index) => (\r\n\t\t\t\t\t<Marker\r\n\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\tlabel={{\r\n\t\t\t\t\t\t\ttext: Utils.getLetra(index + 1),\r\n\t\t\t\t\t\t\tfontFamily: 'Roboto',\r\n\t\t\t\t\t\t\tfontSize: '12px',\r\n\t\t\t\t\t\t\tcolor: '#fff',\r\n\t\t\t\t\t\t\tfontWeight: '900',\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tposition={location}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))}\r\n\r\n\t\t\t\t<ContainerLocationInput>\r\n\t\t\t\t\t<LocationInput onPlaceSelected={handlePlaceSelected} />\r\n\t\t\t\t</ContainerLocationInput>\r\n\r\n\t\t\t\t<ContainerCoords\r\n\t\t\t\t\tonEdit={index => setEditMarcador({ open: true, item: { ...markers[index], index: index } })}\r\n\t\t\t\t\tonItemClick={handleItemClick}\r\n\t\t\t\t\tcoords={markers}\r\n\t\t\t\t\tonDelete={handleDelete}\r\n\t\t\t\t\tonReorder={handleReorder}\r\n\t\t\t\t>\r\n\t\t\t\t\t{/*<ContainerButtons>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tstyle={{ borderRight: 'none', borderBottomRightRadius: '0' }}\r\n\t\t\t\t\t\t\tdisabled={markers.length === 0}\r\n\t\t\t\t\t\t\tonClick={() => handleSalvar()}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tSALVAR\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tstyle={{ borderBottomLeftRadius: '0' }}\r\n\t\t\t\t\t\t\tdisabled={markers.length < 2 || markers.length > 25}\r\n\t\t\t\t\t\t\tonClick={handleProcessar}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tPROCESSAR ROTA\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</ContainerButtons>*/}\r\n\t\t\t\t</ContainerCoords>\r\n\r\n\t\t\t\t<Modal\r\n\t\t\t\t\tcloseOnOverlayClick\r\n\t\t\t\t\tonClose={() => setEditMarcador({ open: false, item: {} })}\r\n\t\t\t\t\topen={editMarcador.open}\r\n\t\t\t\t>\r\n\t\t\t\t\t{editMarcador.open && (\r\n\t\t\t\t\t\t<MarcadorEdit\r\n\t\t\t\t\t\t\tonConfirm={handleConfirmEditMarcador}\r\n\t\t\t\t\t\t\tonCancel={() => setEditMarcador({ open: false, item: {} })}\r\n\t\t\t\t\t\t\titem={editMarcador.item}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Modal>\r\n\t\t\t</FullMap>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default GoogleApiWrapper({\r\n\tapiKey: CONST.API_KEY,\r\n\tlanguage: 'pt-BR',\r\n})(App);\r\n","import 'react-app-polyfill/ie9';\nimport 'react-app-polyfill/stable';\nimport 'core-js';\nimport './polyfills';\nimport 'promise-polyfill/src/polyfill';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}