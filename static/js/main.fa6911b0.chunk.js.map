{"version":3,"sources":["components/LocationInput/index.js","hooks/usePrevious.js","utils.js","components/ContainerCoords/index.js","components/Modal/index.js","components/MarcadorEdit/index.js","App.js","constants.js","index.js"],"names":["Input","styled","input","props","items","ContainerSuggestions","div","ItemSuggestion","active","LocationSearchInput","handleChange","address","setState","handleSelect","geocodeByAddress","then","results","getLatLng","latLng","onPlaceSelected","catch","error","console","state","highlightFirstSuggestion","value","this","onChange","onSelect","getInputProps","suggestions","getSuggestionItemProps","loading","length","placeholder","map","suggestion","description","React","Component","usePrevious","ref","useRef","useEffect","current","getLetra","number","split","Container","StyledContainer","List","ol","StyledItemCoord","li","created","ContainerAcoes","IconButton","button","ContainerDescricao","DragHandle","SortableHandle","style","cursor","id","SortableItem","SortableElement","useState","setCreated","setTimeout","onClick","Utils","coord","index","onEdit","onDelete","SortableList","SortableContainer","itemsEnd","onItemClick","prevItems","scrollIntoView","behavior","key","float","clear","el","ContainerCoords","coords","onReorder","children","onSortEnd","oldIndex","newIndex","arrayMove","ContainerModal","open","Modal","onClose","closeOnOverlayClick","Button","Body","Header","Bottom","MarcadorEdit","descricaoInput","item","onCancel","onConfirm","descricao","setDescricao","focus","setSelectionRange","defaultValue","event","target","type","FullMap","Map","ContainerLocationInput","GoogleApiWrapper","apiKey","language","editMarcador","setEditMarcador","markers","setMarkers","route","points","centralizar","centralizarMapa","setCentralizarMapa","center","lat","lng","zoom","bounds","undefined","mapCenter","setMapCenter","window","globalDelphiSetMarkers","google","maps","LatLngBounds","i","extend","getCenter","JSON","stringify","a","b","c","obj","cord","prevState","initialCenter","path","strokeColor","strokeOpacity","strokeWeight","location","label","text","fontFamily","fontSize","color","fontWeight","position","LocationInput","newMarkers","filter","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.fa6911b0.chunk.js","sourcesContent":["import React from 'react';\r\nimport PlacesAutocomplete, { geocodeByAddress, getLatLng } from 'react-places-autocomplete';\r\nimport styled from 'styled-components';\r\n\r\nconst Input = styled.input`\r\n\twidth: 100%;\r\n\tpadding: 12px 20px;\r\n\tfont-family: 'Roboto';\r\n\tborder-radius: 2px;\r\n\tbox-shadow: 3px ${props => (props.items ? '0' : '4px')} 8px 0 rgb(0, 0, 0, 0.2);\r\n\tborder: 1px solid #ccc;\r\n`;\r\n\r\nconst ContainerSuggestions = styled.div`\r\n\twidth: 100%;\r\n\tbackground-color: #fff;\r\n\tbox-shadow: 3px ${props => (props.items ? '4px' : '0')} 8px 0 rgb(0, 0, 0, 0.2);\r\n`;\r\n\r\nconst ItemSuggestion = styled.div`\r\n\tpadding: 15px 20px;\r\n\tfont-size: 0.8em;\r\n\tfont-family: 'Roboto';\r\n\tcursor: pointer;\r\n\tbackground-color: ${props => (props.active ? '#f0f0f0' : '#fff')};\r\n\ttransition: all 0.1s;\r\n`;\r\n\r\nclass LocationSearchInput extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.onPlaceSelected = props.onPlaceSelected ? props.onPlaceSelected : () => {};\r\n\t\tthis.state = { address: '' };\r\n\t}\r\n\r\n\thandleChange = address => {\r\n\t\tthis.setState({ address });\r\n\t};\r\n\r\n\thandleSelect = address => {\r\n\t\tgeocodeByAddress(address)\r\n\t\t\t.then(results => getLatLng(results[0]))\r\n\t\t\t.then(latLng => {\r\n\t\t\t\tthis.onPlaceSelected({ ...latLng, address: address });\r\n\t\t\t\tthis.setState({ address: '' });\r\n\t\t\t})\r\n\t\t\t.catch(error => console.error(error));\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<PlacesAutocomplete\r\n\t\t\t\thighlightFirstSuggestion\r\n\t\t\t\tvalue={this.state.address}\r\n\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\tonSelect={this.handleSelect}\r\n\t\t\t>\r\n\t\t\t\t{({ getInputProps, suggestions, getSuggestionItemProps, loading }) => (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\titems={suggestions.length > 0}\r\n\t\t\t\t\t\t\t{...getInputProps({ placeholder: 'Procurar endereços, cidades, estados, locais...' })}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<ContainerSuggestions items={suggestions.length > 0}>\r\n\t\t\t\t\t\t\t{loading && <ItemSuggestion>Loading...</ItemSuggestion>}\r\n\t\t\t\t\t\t\t{suggestions.map(suggestion => (\r\n\t\t\t\t\t\t\t\t<ItemSuggestion active={suggestion.active} {...getSuggestionItemProps(suggestion)}>\r\n\t\t\t\t\t\t\t\t\t{suggestion.description}\r\n\t\t\t\t\t\t\t\t</ItemSuggestion>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</ContainerSuggestions>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</PlacesAutocomplete>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default LocationSearchInput;\r\n","import { useEffect, useRef } from 'react';\r\n\r\nconst usePrevious = value => {\r\n\tconst ref = useRef();\r\n\tuseEffect(() => {\r\n\t\tref.current = value;\r\n\t});\r\n\treturn ref.current;\r\n};\r\n\r\nexport default usePrevious;","function distance(position1, position2) {\r\n\tvar deg2rad = function (deg) { return deg * (Math.PI / 180); },\r\n\t\t\tR = 6371,\r\n\t\t\tdLat = deg2rad(position2.lat - position1.lat),\r\n\t\t\tdLng = deg2rad(position2.lng - position1.lng),\r\n\t\t\ta = Math.sin(dLat / 2) * Math.sin(dLat / 2)\r\n\t\t\t\t\t+ Math.cos(deg2rad(position1.lat))\r\n\t\t\t\t\t* Math.cos(deg2rad(position1.lat))\r\n\t\t\t\t\t* Math.sin(dLng / 2) * Math.sin(dLng / 2),\r\n\t\t\tc = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n\t\treturn ((R * c *1000).toFixed());\r\n}\r\n\r\n//-- Define radius function\r\nconst toRad = function (value) {\r\n\treturn value * Math.PI / 180;\r\n}\r\n\r\n//-- Define degrees function\r\nconst toDeg = function (value) {\r\n\treturn value * (180 / Math.PI);\r\n}\r\n\r\n//-- Define middle point function\r\nfunction midPoint(position1, position2) {\r\n\r\n\tlet lat1 = position1.lat;\r\n\tlet lng1 = position1.lng;\r\n\tlet lat2 = position2.lat;\r\n\tlet lng2 = position2.lng;\r\n\r\n\t//-- Longitude difference\r\n\tvar dLng = toRad(lng2 - lng1);\r\n\r\n\t//-- Convert to radians\r\n\tlat1 = toRad(lat1);\r\n\tlat2 = toRad(lat2);\r\n\tlng1 = toRad(lng1);\r\n\r\n\tvar bX = Math.cos(lat2) * Math.cos(dLng);\r\n\tvar bY = Math.cos(lat2) * Math.sin(dLng);\r\n\tvar lat3 = Math.atan2(Math.sin(lat1) + Math.sin(lat2), Math.sqrt((Math.cos(lat1) + bX) * (Math.cos(lat1) + bX) + bY * bY));\r\n\tvar lng3 = lng1 + Math.atan2(bY, Math.cos(lat1) + bX);\r\n\r\n\t//-- Return result\r\n\treturn { lat: toDeg(lat3), lng: toDeg(lng3) };\r\n}\r\n\r\nconst dividirEmDistanciasMenores = (elements, maxDistance) => {\r\n\tlet newElements = [ ...elements ];\r\n\tfor (let i = 0; i < elements.length; i++) {\r\n\t\tif (elements[i + 1]) {\r\n\t\t\tconst coord = elements[i];\r\n\t\t\tconst distancia = distance(coord, elements[i + 1]);\r\n\t\t\tif (distancia > maxDistance) {\r\n\t\t\t\tconst middlePoint = midPoint(coord, elements[i + 1]);\r\n\t\t\t\tnewElements.splice(i + 1, 0, middlePoint);\r\n\t\t\t\treturn dividirEmDistanciasMenores(newElements, maxDistance);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn newElements;\t\t\r\n}\r\n\r\nconst getLetra = (number) => {\r\n\tconst letras = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n\treturn letras.split('')[number - 1];\r\n}\r\n\r\nexport { \r\n\tdistance, \r\n\tmidPoint,\r\n\tdividirEmDistanciasMenores,\r\n\tgetLetra\r\n};","import React, { useState, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport { SortableContainer, SortableElement, SortableHandle } from 'react-sortable-hoc';\r\nimport arrayMove from 'array-move';\r\n\r\nimport { MdDeleteForever, MdReorder, MdEdit } from 'react-icons/md';\r\n\r\nimport usePrevious from '../../hooks/usePrevious';\r\n\r\nimport * as Utils from '../../utils';\r\n\r\nconst Container = styled.div`\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: space-around;\r\n\tposition: absolute;\r\n\twidth: 400px;\r\n\theight: 200px;\r\n\tleft: 30px;\r\n\tbottom: 55px;\r\n\tbox-shadow: 4px 4px 8px 0 rgba(0, 0, 0, 0.2);\r\n`;\r\n\r\nconst StyledContainer = styled.div`\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tbackground-color: #fff;\r\n\toverflow-y: scroll;\r\n\tborder-top-left-radius: 2px;\r\n\tborder-top-right-radius: 2px;\r\n`;\r\n\r\nconst List = styled.ol`\r\n\tlist-style-type: none;\r\n\tmargin: 10px 0 0 0;\r\n\tpadding: 0;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n`;\r\n\r\nconst StyledItemCoord = styled.li`\r\n\twidth: 338px;\r\n\tmargin-bottom: 5px;\r\n\tpadding: 5px 10px;\r\n\tborder: 1px solid #bbb;\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tbackground-color: ${props => (props.created ? '#26A598' : '#fff')};\r\n\tcolor: ${props => (props.created ? '#fff' : '#222')};\r\n\ttransition: background-color 0.5s;\r\n\tfont-weight: 600;\r\n\tfont-size: 0.8em;\r\n\tfont-family: 'Roboto';\r\n\tuser-select: none;\r\n\tcursor: pointer;\r\n`;\r\n\r\nconst ContainerAcoes = styled.div`\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n`;\r\n\r\nconst IconButton = styled.button`\r\n\ttext-align: center;\r\n\theight: 100%;\r\n\tpadding: 0 2px;\r\n\tborder: none;\r\n\tbackground: none;\r\n\tfont-size: 1.3em;\r\n\tcolor: inherit;\r\n\tdisplay: inline-flex;\r\n\tflex-direction: column;\r\n\tjustify-content: center;\r\n\tcursor: pointer;\r\n\t&:focus {\r\n\t\toutline: 0;\r\n\t}\r\n`;\r\n\r\nconst ContainerDescricao = styled.div`\r\n\tpadding: 0 10px;\r\n\ttext-align: center;\r\n\tmax-width: 250px;\r\n`;\r\n\r\nconst DragHandle = SortableHandle(() => (\r\n\t<IconButton style={{ cursor: 'move' }} id=\"btn-reorder\">\r\n\t\t<MdReorder />\r\n\t</IconButton>\r\n));\r\n\r\nconst ItemCoord = props => {\r\n\tconst [created, setCreated] = useState(true);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetTimeout(() => {\r\n\t\t\tif (created) setCreated(false);\r\n\t\t}, 200);\r\n\t}, [created]);\r\n\r\n\treturn (\r\n\t\t<StyledItemCoord created={created}>\r\n\t\t\t<DragHandle />\r\n\t\t\t<ContainerDescricao onClick={props.onClick}>\r\n\t\t\t\t{Utils.getLetra(props.coord.index + 1)} - {props.coord.address}\r\n\t\t\t</ContainerDescricao>\r\n\t\t\t<ContainerAcoes>\r\n\t\t\t\t<IconButton onClick={() => props.onEdit()}>\r\n\t\t\t\t\t<MdEdit />\r\n\t\t\t\t</IconButton>\r\n\t\t\t\t<IconButton onClick={() => props.onDelete()}>\r\n\t\t\t\t\t<MdDeleteForever />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</ContainerAcoes>\r\n\t\t</StyledItemCoord>\r\n\t);\r\n};\r\n\r\nconst SortableItem = SortableElement(ItemCoord);\r\n\r\nconst SortableList = SortableContainer(({ items, onItemClick, onEdit, onDelete }) => {\r\n\tvar itemsEnd;\r\n\r\n\tconst prevItems = usePrevious(items);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (prevItems && items && items.length > prevItems.length) {\r\n\t\t\titemsEnd.scrollIntoView({ behavior: 'smooth' });\r\n\t\t}\r\n\t}, [items, prevItems, itemsEnd]);\r\n\r\n\treturn (\r\n\t\t<List>\r\n\t\t\t{items.map((coord, index) => (\r\n\t\t\t\t<SortableItem\r\n\t\t\t\t\tonClick={() => onItemClick(index)}\r\n\t\t\t\t\tkey={index}\r\n\t\t\t\t\tindex={index}\r\n\t\t\t\t\tcoord={{ ...coord, index: index }}\r\n\t\t\t\t\tonEdit={() => onEdit(index)}\r\n\t\t\t\t\tonDelete={() => onDelete(index)}\r\n\t\t\t\t/>\r\n\t\t\t))}\r\n\t\t\t<div style={{ float: 'left', clear: 'both' }} ref={el => (itemsEnd = el)}></div>\r\n\t\t</List>\r\n\t);\r\n});\r\n\r\nconst ContainerCoords = ({ coords, onDelete, onEdit, onReorder, onItemClick, children }) => {\r\n\tconst handleSortEnd = ({ oldIndex, newIndex }) => onReorder(arrayMove(coords, oldIndex, newIndex));\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<StyledContainer>\r\n\t\t\t\t<SortableList\r\n\t\t\t\t\tonSortEnd={handleSortEnd}\r\n\t\t\t\t\titems={coords}\r\n\t\t\t\t\tonItemClick={onItemClick}\r\n\t\t\t\t\tonEdit={onEdit}\r\n\t\t\t\t\tonDelete={onDelete}\r\n\t\t\t\t/>\r\n\t\t\t</StyledContainer>\r\n\t\t\t{children}\r\n\t\t</Container>\r\n\t);\r\n};\r\n\r\nexport default ContainerCoords;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst ContainerModal = styled.div`\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\twidth: 100vw;\r\n\theight: 100vh;\r\n\tdisplay: ${({ open }) => open ? 'flex' : 'none' };\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tbackground-color: #0005;\r\n`;\r\n\r\nconst Modal = ({ children, open, onClose, closeOnOverlayClick }) => (\r\n\t<ContainerModal onClick={() => {\r\n\t\t// if (closeOnOverlayClick) onClose();\r\n\t}} open={open}>\r\n\t\t{ children }\r\n\t</ContainerModal>\t\r\n);\r\n\r\nexport default Modal;","import React, { useState, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst Button = styled.button`\r\n\tbackground-color: #fff;\r\n\tborder: 1px solid #222;\r\n\tborder-radius: 1px;\r\n\tpadding: 7px 15px;\r\n\tmargin-right: 15px;\r\n\tfont-weight: 900;\r\n\tfont-family: 'Roboto';\r\n\ttransition: all 0.1s;\r\n\r\n\t&:hover {\r\n\t\tbackground-color: #222;\r\n\t\tcolor: #fff;\r\n\t}\r\n`;\r\n\r\nconst Body = styled.div`\r\n\tflex-grow: 2;\r\n\twidth: 100%;\r\n\tpadding: 30px 0;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n`;\r\n\r\nconst Container = styled.div`\r\n\twidth: 500px;\r\n\tbackground-color: #fff;\r\n\tborder-radius: 2px;\r\n\tbox-shadow: 4px 4px 8px 0 rgba(0, 0, 0, 0.2);\r\n\tfont-family: 'Roboto';\r\n`;\r\n\r\nconst Header = styled.div`\r\n\tborder-bottom: 1px solid #aaa;\r\n\tline-height: 60px;\r\n\ttext-align: center;\r\n\tfont-size: 1.4em;\r\n`;\r\n\r\nconst Bottom = styled.div`\r\n\tborder-bottom: none;\r\n\tborder-top: 1px solid #aaa;\r\n\tfont-size: 1em;\r\n\tdisplay: flex;\r\n\tpadding: 10px 0;\r\n\tflex-direction: row;\r\n\tjustify-content: flex-end;\r\n\talign-items: center;\r\n`;\r\n\r\nconst Input = styled.input`\r\n\twidth: 80%;\r\n\tpadding: 12px 20px;\r\n\tfont-family: 'Roboto';\r\n\tborder-radius: 2px;\r\n\tborder: 1px solid #ccc;\r\n`;\r\n\r\nconst MarcadorEdit = ({ item, onCancel, onConfirm }) => {\r\n\tvar descricaoInput;\r\n\tconst [descricao, setDescricao] = useState('');\r\n\tconst handleConfirmar = () => onConfirm({ ...item, address: descricao });\r\n\tuseEffect(() => setDescricao(item.address), [item]);\r\n\tuseEffect(() => {\r\n\t\tdescricaoInput.focus();\r\n\t\tdescricaoInput.setSelectionRange(0, descricaoInput.value.length);\r\n\t}, [descricaoInput]);\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Header>Alterar Marcador</Header>\r\n\t\t\t<Body>\r\n\t\t\t\t<Input\r\n\t\t\t\t\tref={(input) => { descricaoInput = input; }}\r\n\t\t\t\t\tdefaultValue={descricao}\r\n\t\t\t\t\tonChange={event => setDescricao(event.target.value)}\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tplaceholder=\"Descrição\"\r\n\t\t\t\t></Input>\r\n\t\t\t</Body>\r\n\t\t\t<Bottom>\r\n\t\t\t\t<Button onClick={onCancel}>CANCELAR</Button>\r\n\t\t\t\t<Button onClick={handleConfirmar}>CONFIRMAR</Button>\r\n\t\t\t</Bottom>\r\n\t\t</Container>\r\n\t);\r\n};\r\n\r\nexport default MarcadorEdit;\r\n","import React, { useState, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport { Map, GoogleApiWrapper, Marker, Polyline } from 'google-maps-react';\r\n\r\nimport LocationInput from './components/LocationInput';\r\nimport ContainerCoords from './components/ContainerCoords';\r\nimport Modal from './components/Modal';\r\nimport MarcadorEdit from './components/MarcadorEdit';\r\n\r\nimport * as CONST from './constants';\r\nimport * as Utils from './utils';\r\n\r\nconst FullMap = styled(Map)`\r\n\twidth: 100vw;\r\n\theight: 100vh;\r\n`;\r\n\r\nconst ContainerButtons = styled.div`\r\n\tdisplay: grid;\r\n\tgrid-template-columns: 1fr 1fr;\r\n`;\r\n\r\nconst ContainerLocationInput = styled.div`\r\n\tposition: absolute;\r\n\tleft: 50%;\r\n\twidth: 600px;\r\n\tmargin-left: -300px;\r\n\ttop: 20px;\r\n`;\r\n\r\nconst Button = styled.button`\r\n\twidth: 100%;\r\n\tborder-bottom-left-radius: 2px;\r\n\tborder-bottom-right-radius: 2px;\r\n\tpadding: 10px 0;\r\n\tbottom: 10px;\r\n\tbackground-color: #fff;\r\n\tborder: 1px;\r\n\tborder: 1px solid #888;\r\n\ttransition: all 0.5s;\r\n\tfont-family: 'Roboto';\r\n\tfont-weight: 900;\r\n\r\n\t&:hover {\r\n\t\tbackground-color: #f2f2f2;\r\n\t}\r\n`;\r\n\r\nfunction App(props) {\r\n\tconst [editMarcador, setEditMarcador] = useState({ open: false, item: {} });\r\n\tconst [markers, setMarkers] = useState([]);\r\n\tconst [route, setRoute] = useState([]);\r\n\tconst [centralizarMapa, setCentralizarMapa] = useState({ points: [], centralizar: false });\r\n\tconst [mapCenter, setMapCenter] = useState({\r\n\t\tcenter: { lat: -12.579738, lng: -41.70072720000002 },\r\n\t\tzoom: 7,\r\n\t\tbounds: undefined,\r\n\t});\r\n\r\n\twindow.globalDelphiSetMarkers = setMarkers;\r\n\r\n\tconst handleMapClick = (a, b, c) => {\r\n\t\tconst obj = { ...c };\r\n\t\tconst cord = { ...obj.latLng };\r\n\t\tsetMarkers(prevState => [\r\n\t\t\t...prevState,\r\n\t\t\t{ lat: cord.lat(), lng: cord.lng(), address: `Marcador ${prevState.length + 1}` },\r\n\t\t]);\r\n\t};\r\n\tconst handlePlaceSelected = location => {\r\n\t\tsetMarkers(markers => {\r\n\t\t\tconst newMarkers = [...markers, location];\r\n\t\t\tsetCentralizarMapa({ points: newMarkers, centralizar: true });\r\n\t\t\treturn newMarkers;\r\n\t\t});\r\n\t};\r\n\tconst handleItemClick = index => setCentralizarMapa({ points: [markers[index]], centralizar: true });\r\n\tconst handleDelete = index => setMarkers(markers => markers.filter((value, i) => i !== index));\r\n\tconst handleReorder = coords => setMarkers(coords);\r\n\tconst handleSalvar = () => {\r\n\t\tvar a = document.createElement('a');\r\n\t\tvar file = new Blob([JSON.stringify(markers)], { type: 'application/json' });\r\n\t\ta.href = URL.createObjectURL(file);\r\n\t\ta.download = 'coordenadas';\r\n\t\ta.click();\r\n\t};\r\n\tconst handleProcessar = () => {\r\n\t\tif (markers.length < 2 || markers.length > 25) {\r\n\t\t\talert(`Número de pontos inválido. (Máximo = 25)`);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst waypoints = markers\r\n\t\t\t.filter((coord, index) => index !== 0 && index !== markers.length - 1)\r\n\t\t\t.map(coord => ({ location: `${coord.lat},${coord.lng}`, stopover: true }));\r\n\r\n\t\tconst params = {\r\n\t\t\torigin: `${markers[0].lat},${markers[0].lng}`,\r\n\t\t\tdestination: `${markers[markers.length - 1].lat},${markers[markers.length - 1].lng}`,\r\n\t\t\ttravelMode: 'DRIVING',\r\n\t\t\twaypoints: waypoints,\r\n\t\t};\r\n\r\n\t\tvar directionsService = new props.google.maps.DirectionsService();\r\n\t\tdirectionsService.route(params, (response, status) => {\r\n\t\t\tif (status === 'OK') {\r\n\t\t\t\tconst path = props.google.maps.geometry.encoding.decodePath(response.routes[0].overview_polyline);\r\n\t\t\t\tsetRoute(path);\r\n\t\t\t} else {\r\n\t\t\t\twindow.alert('Falha ao traçar rota: ' + status);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tconst handleConfirmEditMarcador = item => {\r\n\t\tsetMarkers(markers.map((value, index) => (index === item.index ? item : value)));\r\n\t\tsetEditMarcador({ open: false, item: {} });\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tconst { points, centralizar } = centralizarMapa;\r\n\t\tif (points.length > 0 && centralizar) {\r\n\t\t\tvar bounds = new props.google.maps.LatLngBounds();\r\n\t\t\tfor (var i = 0; i < points.length; i++) {\r\n\t\t\t\tbounds.extend(points[i]);\r\n\t\t\t}\r\n\t\t\tsetMapCenter({ center: bounds.getCenter(), bounds: bounds });\r\n\t\t}\r\n\t}, [props, centralizarMapa]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<input type='hidden' id='globalDelphiMarkers' value={JSON.stringify(markers)} />\r\n\t\t\t<FullMap\r\n\t\t\t\tonClick={handleMapClick}\r\n\t\t\t\tbounds={mapCenter.bounds}\r\n\t\t\t\tgoogle={props.google}\r\n\t\t\t\tinitialCenter={mapCenter.center}\r\n\t\t\t\tcenter={mapCenter.center}\r\n\t\t\t\tzoom={mapCenter.zoom}\r\n\t\t\t>\r\n\t\t\t\t{route.length > 0 && (\r\n\t\t\t\t\t<Polyline path={route} strokeColor=\"#3680ff\" strokeOpacity={0.6} strokeWeight={4} />\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{markers.map((location, index) => (\r\n\t\t\t\t\t<Marker\r\n\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\tlabel={{\r\n\t\t\t\t\t\t\ttext: Utils.getLetra(index + 1),\r\n\t\t\t\t\t\t\tfontFamily: 'Roboto',\r\n\t\t\t\t\t\t\tfontSize: '12px',\r\n\t\t\t\t\t\t\tcolor: '#fff',\r\n\t\t\t\t\t\t\tfontWeight: '900',\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tposition={location}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))}\r\n\r\n\t\t\t\t<ContainerLocationInput>\r\n\t\t\t\t\t<LocationInput onPlaceSelected={handlePlaceSelected} />\r\n\t\t\t\t</ContainerLocationInput>\r\n\r\n\t\t\t\t<ContainerCoords\r\n\t\t\t\t\tonEdit={index => setEditMarcador({ open: true, item: { ...markers[index], index: index } })}\r\n\t\t\t\t\tonItemClick={handleItemClick}\r\n\t\t\t\t\tcoords={markers}\r\n\t\t\t\t\tonDelete={handleDelete}\r\n\t\t\t\t\tonReorder={handleReorder}\r\n\t\t\t\t>\r\n\t\t\t\t\t{/*<ContainerButtons>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tstyle={{ borderRight: 'none', borderBottomRightRadius: '0' }}\r\n\t\t\t\t\t\t\tdisabled={markers.length === 0}\r\n\t\t\t\t\t\t\tonClick={() => handleSalvar()}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tSALVAR\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tstyle={{ borderBottomLeftRadius: '0' }}\r\n\t\t\t\t\t\t\tdisabled={markers.length < 2 || markers.length > 25}\r\n\t\t\t\t\t\t\tonClick={handleProcessar}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tPROCESSAR ROTA\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</ContainerButtons>*/}\r\n\t\t\t\t</ContainerCoords>\r\n\r\n\t\t\t\t<Modal\r\n\t\t\t\t\tcloseOnOverlayClick\r\n\t\t\t\t\tonClose={() => setEditMarcador({ open: false, item: {} })}\r\n\t\t\t\t\topen={editMarcador.open}\r\n\t\t\t\t>\r\n\t\t\t\t\t{editMarcador.open && (\r\n\t\t\t\t\t\t<MarcadorEdit\r\n\t\t\t\t\t\t\tonConfirm={handleConfirmEditMarcador}\r\n\t\t\t\t\t\t\tonCancel={() => setEditMarcador({ open: false, item: {} })}\r\n\t\t\t\t\t\t\titem={editMarcador.item}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Modal>\r\n\t\t\t</FullMap>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default GoogleApiWrapper({\r\n\tapiKey: CONST.API_KEY,\r\n\tlanguage: 'pt-BR',\r\n})(App);\r\n","const API_KEY='AIzaSyA3UW4OsghW42-ObMDSMd9EShKCmk8hleE';\r\n\r\nexport { API_KEY };","import 'react-app-polyfill/ie9';\nimport 'react-app-polyfill/stable';\nimport 'core-js';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}